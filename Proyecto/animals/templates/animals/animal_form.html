{% extends "basic.html" %}
{% load static %}

{% block topbar_title %}{% if object %}Editar Animal{% else %}Agregar Animal{% endif %}{% endblock %}

{% block content %}
<div class="bios-form-container">
    <div class="batch-header">
        <div class="bios-form-header">
            <div class="bios-card-icon">
                <span class="material-symbols-outlined">pets</span>
            </div>
            <div>
                <h1 class="batch-title">{% if object %}Editar Animal{% else %}Agregar Animal{% endif %}</h1>
                <p class="batch-subtitle">{% if object %}Actualiza la información del animal{% else %}Ingresa los datos del nuevo animal{% endif %}</p>
            </div>
        </div>
    </div>

    <div class="bios-card">
        <form method="post" class="bios-auth-form">
            {% csrf_token %}

            {% if form.non_field_errors %}
            <div class="bios-error">
                {{ form.non_field_errors }}
            </div>
            {% endif %}

            <div class="bios-field">
                <label for="{{ form.codigo.id_for_label }}" class="bios-label">
                    Código/Identificación <span class="text-red-400">*</span>
                </label>
                {{ form.codigo }}
                {% if form.codigo.errors %}
                <p class="bios-error-msg">{{ form.codigo.errors.0 }}</p>
                {% endif %}
                <p class="bios-help-text">Código único para identificar este animal (se convertirá a mayúsculas)</p>
            </div>

            <div class="bios-field">
                <label for="{{ form.batch.id_for_label }}" class="bios-label">
                    Lote <span class="text-red-400">*</span>
                </label>
                {{ form.batch }}
                {% if form.batch.errors %}
                <p class="bios-error-msg">{{ form.batch.errors.0 }}</p>
                {% endif %}
                <p class="bios-help-text">Selecciona el lote al que pertenece este animal</p>
            </div>

            <div class="animal-form-grid">
                <div class="bios-field">
                    <label for="{{ form.especie.id_for_label }}" class="bios-label">
                        Especie <span class="text-red-400">*</span>
                    </label>
                    {{ form.especie }}
                    {% if form.especie.errors %}
                    <p class="bios-error-msg">{{ form.especie.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="bios-field">
                    <label for="{{ form.raza.id_for_label }}" class="bios-label">
                        Raza
                    </label>
                    {{ form.raza }}
                    {% if form.raza.errors %}
                    <p class="bios-error-msg">{{ form.raza.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>

            <div class="animal-form-grid">
                <div class="bios-field">
                    <label for="{{ form.sexo.id_for_label }}" class="bios-label">
                        Sexo <span class="text-red-400">*</span>
                    </label>
                    {{ form.sexo }}
                    {% if form.sexo.errors %}
                    <p class="bios-error-msg">{{ form.sexo.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="bios-field">
                    <label for="{{ form.fecha_de_nacimiento.id_for_label }}" class="bios-label">
                        Fecha de Nacimiento <span class="text-red-400">*</span>
                    </label>
                    {{ form.fecha_de_nacimiento }}
                    {% if form.fecha_de_nacimiento.errors %}
                    <p class="bios-error-msg">{{ form.fecha_de_nacimiento.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>

            <div class="bios-auth-actions">
                <a href="{% url 'animals:list' %}" class="bios-button-outline bios-form-button-full">
                    <span class="material-symbols-outlined bios-icon-base">arrow_back</span>
                    Cancelar
                </a>
                <button type="submit" class="bios-button-primary bios-form-button-full">
                    <span class="material-symbols-outlined bios-icon-base">
                        {% if object %}check{% else %}save{% endif %}
                    </span>
                    {% if object %}Actualizar Animal{% else %}Agregar Animal{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}